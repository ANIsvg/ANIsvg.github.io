<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SVG Animation Gallery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { --gap: 16px; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#f7f7f7; }
    header { padding: 24px; text-align: center; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: var(--gap);
      padding: 0 24px 32px;
      align-items: start;
    }
    .card {
      background:#fff; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,.08);
      overflow:hidden; transition:transform .15s ease;
    }
    .card:hover { transform: translateY(-2px); }
    .thumb {
      width:100%; aspect-ratio: 1 / 1; display:block; border:0;
      /* <object> 不支持 loading 属性，这里用占位解决布局跳动 */
      background:#fafafa;
    }
    .caption { padding:10px 12px; font-size:14px; color:#333; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    /* 弹窗 */
    .lightbox {
      position:fixed; inset:0; background:rgba(0,0,0,.6);
      display:none; align-items:center; justify-content:center; padding:24px; z-index:999;
    }
    .lightbox.open { display:flex; }
    .dialog {
      background:#fff; width:min(92vw, 980px); max-height:90vh; border-radius:16px; overflow:hidden;
      display:flex; flex-direction:column;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .dialog-header { display:flex; justify-content:space-between; align-items:center; padding:10px 14px; border-bottom:1px solid #eee; }
    .dialog-title { font-size:14px; color:#444; }
    .close-btn { border:0; background:#eee; border-radius:10px; padding:6px 10px; cursor:pointer; }
    .dialog-body { overflow:auto; background:#fafafa; }
    .viewer {
      width:100%; height:min(76vh, 800px); border:0; display:block; background:#fff;
    }
    /* 动画可减弱：尊重系统设置 */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; }
    }
  </style>
</head>
<body>
  <header>
    <h1>SVG Animation Gallery</h1>
    <p style="color:#666;margin:.5rem 0 0;">Click any tile to open the animation in a larger viewer.</p>
  </header>

  <div id="grid" class="grid"></div>

  <div id="lightbox" class="lightbox" role="dialog" aria-modal="true" aria-label="SVG viewer">
    <div class="dialog">
      <div class="dialog-header">
        <div class="dialog-title" id="dialogTitle">Preview</div>
        <button class="close-btn" id="closeBtn" aria-label="Close">Close</button>
      </div>
      <div class="dialog-body">
        <!-- 用 <object> 确保 SMIL/CSS/JS 能跑；同源下脚本可执行 -->
        <object id="viewer" class="viewer" type="image/svg+xml" data=""></object>
      </div>
    </div>
  </div>

  <script>
    // 手动维护清单最稳妥；按需改名
    const FILES = [
      { file: "case1.svg", title: "Case 1" },
      { file: "case2.svg", title: "Case 2" },
      { file: "case3.svg", title: "Case 3" },
      { file: "case4.svg", title: "Case 4" },
      { file: "case4_1.svg", title: "Case 5" },
      { file: "case5.svg", title: "Case 6" },
      { file: "case5_1.svg", title: "Case 7" },
      { file: "case6.svg", title: "Case 8" },
      { file: "case7.svg", title: "Case 8" },
    ];
    const grid = document.getElementById('grid');
    const lightbox = document.getElementById('lightbox');
    const viewer = document.getElementById('viewer');
    const dialogTitle = document.getElementById('dialogTitle');
    const closeBtn = document.getElementById('closeBtn');

    // 生成卡片
    for (const item of FILES) {
      const card = document.createElement('div');
      card.className = 'card';
      const obj = document.createElement('object');
      obj.className = 'thumb';
      obj.type = 'image/svg+xml';
      obj.data = `svgs/${item.file}`; // 缩略区域直接加载 SVG，本身就是活的动画
      obj.setAttribute('aria-label', item.title);
      const caption = document.createElement('div');
      caption.className = 'caption';
      caption.textContent = item.title;
      card.appendChild(obj);
      card.appendChild(caption);

      card.addEventListener('click', () => {
        viewer.data = `svgs/${item.file}`;
        dialogTitle.textContent = item.title;
        lightbox.classList.add('open');
      });

      grid.appendChild(card);
    }

    // 关闭弹窗
    function close() { lightbox.classList.remove('open'); viewer.data = ''; }
    closeBtn.addEventListener('click', close);
    lightbox.addEventListener('click', (e) => { if (e.target === lightbox) close(); });
    window.addEventListener('keydown', (e) => { if (e.key === 'Escape') close(); });
  </script>
</body>
</html>
